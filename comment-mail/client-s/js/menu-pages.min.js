(function(b){var a={},d=b(window),c=b(document);a.onReady=function(){var e="comment_mail",l="comment-mail",f=b("."+l+"-menu-page"),g=b("."+l+"-menu-page-area"),k=b("."+l+"-menu-page-table"),h=b("."+l+"-menu-page-form"),i=window[e+"_vars"],m=window[e+"_i18n"];g.find("[data-pmp-action]").on("click",function(p){p.preventDefault(),p.stopImmediatePropagation();var o=b(this),n=o.data();if(typeof n.pmpConfirmation!=="string"||confirm(n.pmpConfirmation)){location.href=n.pmpAction}});f.find(".pmp-panels-open").on("click",function(){f.find(".pmp-panel-heading").addClass("open").next(".pmp-panel-body").addClass("open")});f.find(".pmp-panels-close").on("click",function(){f.find(".pmp-panel-heading").removeClass("open").next(".pmp-panel-body").removeClass("open")});f.find(".pmp-panel-heading").on("click",function(n){n.preventDefault(),n.stopImmediatePropagation();b(this).toggleClass("open").next(".pmp-panel-body").toggleClass("open")});f.find('select[name$="_enable\\]"], select[name$="_enable_flavor\\]"]').not(".no-if-enabled").on("change",function(){var q=b(this),o=q[0].name,n=q.val(),p=q.closest(".pmp-panel");if((o.indexOf("_enable]")!==-1&&(n===""||n==="1"))||(o.indexOf("_flavor]")!==-1&&n!=="0")){p.find(".pmp-panel-if-enabled").css("opacity",1).find(":input").removeAttr("readonly")}else{p.find(".pmp-panel-if-enabled").css("opacity",0.4).find(":input").attr("readonly","readonly")}}).trigger("change");k.find("> form").on("submit",function(){var r=b(this),o=r.find("#bulk-action-selector-top"),q=r.find("#bulk-action-selector-bottom"),p=o.val(),n=q.val();if(p==="reconfirm"||n==="reconfirm"){return confirm(m.bulk_reconfirm_confirmation)}else{if(p==="delete"||n==="delete"){return confirm(m.bulk_delete_confirmation)}}return true});var j=function(){var r=b(this),o=r.val(),p={},n=b('<img src="'+i.plugin_url+'/client-s/images/tiny-progress-bar.gif" />'),q=h.find("> form tr.pmp-sub-form-comment-id"),s=q.find(":input");if(!q.length||!s.length){return}s.replaceWith(n),p[e]={comment_id_row_via_ajax:{post_id:o}},b.get(i.ajax_endpoint,p,function(t){q.replaceWith(t)})};h.find("> form tr.pmp-sub-form-post-id select").on("change",j),h.find("> form tr.pmp-sub-form-post-id input").on("blur",j);h.find("> form tr.pmp-sub-form-status select").on("change",function(){var o=b(this),p=o.val(),n=o.siblings(".checkbox").first();if(!n.length){return}if(n[0].checked||p==="unconfirmed"){n.show()}else{n.hide(),n[0].checked=false}}).trigger("change");h.find("> form").on("submit",function(p){var o=b(this),q="",n=[];o.find(".form-required :input[aria-required]").each(function(){var r=b(this),s=b.trim(r.val());if(s==="0"||s===""){n.push(this)}});b.each(n,function(){q+=b.trim(o.find('label[for="'+this.id+'"]').text().replace(/\s+/g," "))+"\n"});if((q=b.trim(q)).length){p.preventDefault(),p.stopImmediatePropagation(),alert(q);return false}})};c.ready(a.onReady)})(jQuery);