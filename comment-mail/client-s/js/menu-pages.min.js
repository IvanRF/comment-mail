(function(b){var a={},d=b(window),c=b(document);a.onReady=function(){var f="comment_mail",m="comment-mail",h=b("."+m+"-menu-page"),i=b("."+m+"-menu-page-area"),l=b("."+m+"-menu-page-table"),j=b("."+m+"-menu-page-form"),k=window[f+"_vars"],n=window[f+"_i18n"],g={search_contains:true,disable_search_threshold:10,allow_single_deselect:true};i.find("[data-pmp-action]").on("click",function(q){q.preventDefault(),q.stopImmediatePropagation();var p=b(this),o=p.data();if(typeof o.pmpConfirmation!=="string"||confirm(o.pmpConfirmation)){location.href=o.pmpAction}});h.find(".pmp-panels-open").on("click",function(){h.find(".pmp-panel-heading").addClass("open").next(".pmp-panel-body").addClass("open")});h.find(".pmp-panels-close").on("click",function(){h.find(".pmp-panel-heading").removeClass("open").next(".pmp-panel-body").removeClass("open")});h.find(".pmp-panel-heading").on("click",function(o){o.preventDefault(),o.stopImmediatePropagation();b(this).toggleClass("open").next(".pmp-panel-body").toggleClass("open")});h.find('select[name$="_enable\\]"], select[name$="_enable_flavor\\]"]').not(".no-if-enabled").on("change",function(){var r=b(this),p=r[0].name,o=r.val(),q=r.closest(".pmp-panel");if((p.indexOf("_enable]")!==-1&&(o===""||o==="1"))||(p.indexOf("_flavor]")!==-1&&o!=="0")){q.find(".pmp-panel-if-enabled").css("opacity",1).find(":input").removeAttr("readonly")}else{q.find(".pmp-panel-if-enabled").css("opacity",0.4).find(":input").attr("readonly","readonly")}}).trigger("change");l.find("> form").on("submit",function(){var s=b(this),p=s.find("#bulk-action-selector-top"),r=s.find("#bulk-action-selector-bottom"),q=p.val(),o=r.val();if(q==="reconfirm"||o==="reconfirm"){return confirm(n.bulk_reconfirm_confirmation)}else{if(q==="delete"||o==="delete"){return confirm(n.bulk_delete_confirmation)}}return true});var e={$select:j.find("> form tr.pmp-sub-form-post-id select"),$input:j.find("> form tr.pmp-sub-form-post-id input")};if(e.$select.length){e.lastId=b.trim(e.$select.val())}else{e.lastId=b.trim(e.$input.val())}e.handler=function(){var p=b(this),q={},o={};e.newId=b.trim(p.val());if(e.newId===e.lastId){return}e.lastId=e.newId;q.$lastRow=j.find("> form tr.pmp-sub-form-comment-id"),q.$lastChosenContainer=q.$lastRow.find(".chosen-container"),q.$lastInput=q.$lastRow.find(":input");if(!q.$lastRow.length||!q.$lastInput.length){return}q.$lastChosenContainer.remove(),q.$lastInput.replaceWith('<img src="'+k.plugin_url+'/client-s/images/tiny-progress-bar.gif" />');o[f]={sub_form_comment_id_row_via_ajax:{post_id:e.newId}},b.get(k.ajax_endpoint,o,function(r){q.$newRow=b(r),q.$lastRow.replaceWith(q.$newRow),q.$newRow.find("select").chosen(g)})};e.$select.on("change",e.handler).chosen(g),e.$input.on("blur",e.handler);j.find("> form tr.pmp-sub-form-comment-id select").chosen(g);j.find("> form tr.pmp-sub-form-user-id select").chosen(g);j.find("> form tr.pmp-sub-form-status select").on("change",function(){var r=b(this),o=b.trim(r.val()),p=r.siblings(".checkbox"),q=p.find("input");if(o==="unconfirmed"){p.show()}else{q.prop("checked",false),p.hide()}}).trigger("change").chosen(g);j.find("> form tr.pmp-sub-form-deliver select").chosen(g);j.find("> form").on("submit",function(q){var p=b(this),r="",o=[];p.find(".form-required :input[required]").each(function(){var s=b(this),t=b.trim(s.val());if(typeof t==="undefined"||t==="0"||t===""){o.push(this)}});b.each(o,function(){r+=b.trim(p.find('label[for="'+this.id+'"]').text().replace(/\s+/g," "))+"\n"});if((r=b.trim(r)).length){q.preventDefault(),q.stopImmediatePropagation(),alert(r);return false}})};c.ready(a.onReady)})(jQuery);