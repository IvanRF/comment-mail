(function(b){var a={},d=b(window),c=b(document);a.onReady=function(){var g="comment_mail",q="comment-mail",i=b("."+q+"-menu-page"),j=b("."+q+"-menu-page-area"),n=b("."+q+"-menu-page-table"),k=b("."+q+"-menu-page-form"),l=window[g+"_vars"],r=window[g+"_i18n"],h={search_contains:true,disable_search_threshold:10,allow_single_deselect:true},m=[],p={lineNumbers:false,matchBrackets:true,theme:"ambiance",tabSize:3,indentWithTabs:true,extraKeys:{F11:function(s){if(s.getOption("fullScreen")){s.setOption("fullScreen",false),b("#adminmenuwrap, #wpadminbar").show()}else{s.setOption("fullScreen",true),b("#adminmenuwrap, #wpadminbar").hide()}}}};j.find("[data-pmp-action]").on("click",function(u){u.preventDefault(),u.stopImmediatePropagation();var t=b(this),s=t.data();if(typeof s.pmpConfirmation!=="string"||confirm(s.pmpConfirmation)){location.href=s.pmpAction}});i.find("[data-cm-mode]").each(function(){var u=b(this),s=u.data("cmMode"),t=u.data("cmHeight"),v=u.find("textarea");if(v.length!==1){return}window.CodeMirror=CodeMirror||{fromTextArea:function(){}};u.addClass("cm"),m.push(CodeMirror.fromTextArea(v[0],b.extend({},p,{mode:s}))),m[m.length-1].setSize(null,t)});var e=function(){b.each(m,function(s,t){t.refresh()})};i.find(".pmp-panels-open").on("click",function(){i.find(".pmp-panel-heading").addClass("open").next(".pmp-panel-body").addClass("open"),e()});i.find(".pmp-panels-close").on("click",function(){i.find(".pmp-panel-heading").removeClass("open").next(".pmp-panel-body").removeClass("open"),e()});i.find(".pmp-panel-heading").on("click",function(s){s.preventDefault(),s.stopImmediatePropagation();b(this).toggleClass("open").next(".pmp-panel-body").toggleClass("open"),e()});i.find('select[name$="\\[enable\\]"], select[name$="_enable\\]"]').not(".no-if-enabled").not(".no-if-disabled").on("change",function(){var A=b(this),v=b.trim(A.val()),y=A.closest(".pmp-panel");var z=v!==""&&v!=="0",x=!z;var w=".pmp-panel-if-enabled",t=".pmp-panel-if-enabled-show";var u=".pmp-panel-if-disabled",s=".pmp-panel-if-disabled-show";if(z){y.find(w+","+t).show().css("opacity",1).find(":input").removeAttr("disabled")}else{y.find(w+","+t).css("opacity",0.2).find(":input").attr("disabled","disabled"),y.find(t).hide()}if(x){y.find(u+","+s).show().css("opacity",1).find(":input").removeAttr("disabled")}else{y.find(u+","+s).css("opacity",0.2).find(":input").attr("disabled","disabled"),y.find(s).hide()}e()}).trigger("change");n.find("> form").on("submit",function(){var w=b(this),t=w.find("#bulk-action-selector-top"),v=w.find("#bulk-action-selector-bottom"),u=t.val(),s=v.val();if(u==="reconfirm"||s==="reconfirm"){return confirm(r.bulkReconfirmConfirmation)}else{if(u==="delete"||s==="delete"){return confirm(r.bulkDeleteConfirmation)}}return true});var f={$select:k.find("> form tr.pmp-sub-form-post-id select"),$input:k.find("> form tr.pmp-sub-form-post-id input"),progress:'<img src="'+l.pluginUrl+'/client-s/images/tiny-progress-bar.gif" />'};if(f.$select.length){f.lastId=b.trim(f.$select.val())}else{f.lastId=b.trim(f.$input.val())}f.handler=function(){var t=b(this),u={},s={};f.newId=b.trim(t.val());if(f.newId===f.lastId){return}f.lastId=f.newId;u.$lastRow=k.find("> form tr.pmp-sub-form-comment-id"),u.$lastChosenContainer=u.$lastRow.find(".chosen-container"),u.$lastInput=u.$lastRow.find(":input");if(!u.$lastRow.length||!u.$lastInput.length){return}u.$lastChosenContainer.remove(),u.$lastInput.replaceWith(b(f.progress));s[g]={sub_form_comment_id_row_via_ajax:{post_id:f.newId}},b.get(l.ajaxEndpoint,s,function(v){u.$newRow=b(v),u.$lastRow.replaceWith(u.$newRow),u.$newRow.find("select").chosen(h)})};var o={$select:k.find("> form tr.pmp-sub-form-user-id select"),$input:k.find("> form tr.pmp-sub-form-user-id input"),$progress:b('<img src="'+l.pluginUrl+'/client-s/images/tiny-progress-bar.gif" />')};if(o.$select.length){o.lastId=b.trim(o.$select.val())}else{o.lastId=b.trim(o.$input.val())}o.handler=function(){var x=b(this),w,s,u,y,v,t={};o.newId=b.trim(x.val());if(o.newId===o.lastId){return}o.lastId=o.newId;w=k.find("> form tr.pmp-sub-form-email th"),s=k.find("> form tr.pmp-sub-form-email input"),u=k.find("> form tr.pmp-sub-form-fname input"),y=k.find("> form tr.pmp-sub-form-lname input"),v=k.find("> form tr.pmp-sub-form-insertion-ip input");if(!w.length||(s.length+u.length+y.length)<1){return}o.$progress.remove(),w.append(o.$progress);t[g]={sub_form_user_id_info_via_ajax:{user_id:o.newId}},b.get(l.ajaxEndpoint,t,function(z){s.val(z.email),u.val(z.fname),y.val(z.lname),v.val(z.ip);o.$progress.remove()})};f.$select.on("change",f.handler).chosen(h),f.$input.on("blur",f.handler);k.find("> form tr.pmp-sub-form-comment-id select").chosen(h);o.$select.on("change",o.handler).chosen(h),o.$input.on("blur",o.handler);k.find("> form tr.pmp-sub-form-status select").on("change",function(){var v=b(this),s=b.trim(v.val()),t=v.siblings(".checkbox"),u=t.find("input");if(s==="unconfirmed"){t.show()}else{u.prop("checked",false),t.hide()}}).trigger("change").chosen(h);k.find("> form tr.pmp-sub-form-deliver select").chosen(h);k.find("> form").on("submit",function(u){var t=b(this),v="",s=[];t.find(".form-required :input[required]").each(function(){var w=b(this),x=b.trim(w.val());if(typeof x==="undefined"||x==="0"||x===""){s.push(this)}});b.each(s,function(){v+=b.trim(t.find('label[for="'+this.id+'"]').text().replace(/\s+/g," "))+"\n"});if((v=b.trim(v)).length){u.preventDefault(),u.stopImmediatePropagation(),alert(v);return false}})};c.ready(a.onReady)})(jQuery);